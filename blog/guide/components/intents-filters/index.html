<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="Intent 是一个消息传递对象，您可以使用它从其他应用组件请求操作。尽管 Intent 可以通过多种方式促进组件之间的通信，但其基本用例主要包括以下三个：  启动 Activity： Activity 表示应用中的一个屏幕。通过将 Intent 传递给 startActivity())，您可以启动新的 Activity 实例。Intent 描述了要启动的 Activity，并携带了任何必要的数据">
<meta property="og:type" content="article">
<meta property="og:title" content="蜗牛计划day05：Intent 和 Intent 过滤器">
<meta property="og:url" content="https://www.sanqis.com/blog/blog/guide/components/intents-filters/index.html">
<meta property="og:site_name" content="今夕何夕">
<meta property="og:description" content="Intent 是一个消息传递对象，您可以使用它从其他应用组件请求操作。尽管 Intent 可以通过多种方式促进组件之间的通信，但其基本用例主要包括以下三个：  启动 Activity： Activity 表示应用中的一个屏幕。通过将 Intent 传递给 startActivity())，您可以启动新的 Activity 实例。Intent 描述了要启动的 Activity，并携带了任何必要的数据">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://developer.android.google.cn/images/components/intent-filters@2x.png">
<meta property="og:image" content="https://developer.android.google.cn/images/training/basics/intent-chooser.png">
<meta property="og:updated_time" content="2017-11-21T11:46:37.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="蜗牛计划day05：Intent 和 Intent 过滤器">
<meta name="twitter:description" content="Intent 是一个消息传递对象，您可以使用它从其他应用组件请求操作。尽管 Intent 可以通过多种方式促进组件之间的通信，但其基本用例主要包括以下三个：  启动 Activity： Activity 表示应用中的一个屏幕。通过将 Intent 传递给 startActivity())，您可以启动新的 Activity 实例。Intent 描述了要启动的 Activity，并携带了任何必要的数据">
<meta name="twitter:image" content="https://developer.android.google.cn/images/components/intent-filters@2x.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://www.sanqis.com/blog/blog/guide/components/intents-filters/"/>





  <title>蜗牛计划day05：Intent 和 Intent 过滤器 | 今夕何夕</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">今夕何夕</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">博客</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.sanqis.com/blog/blog/guide/components/intents-filters/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jadyli">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="今夕何夕">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">蜗牛计划day05：Intent 和 Intent 过滤器</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-21T16:16:26+08:00">
                2017-11-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p><a href="https://developer.android.google.cn/reference/android/content/Intent.html" target="_blank" rel="external">Intent</a> 是一个消息传递对象，您可以使用它从其他<a href="https://developer.android.google.cn/guide/components/fundamentals.html#Components" target="_blank" rel="external">应用组件</a>请求操作。尽管 Intent 可以通过多种方式促进组件之间的通信，但其基本用例主要包括以下三个：</p>
<ul>
<li><p><strong>启动 Activity</strong>：</p>
<p><a href="https://developer.android.google.cn/reference/android/app/Activity.html" target="_blank" rel="external">Activity</a> 表示应用中的一个屏幕。通过将 <a href="https://developer.android.google.cn/reference/android/content/Intent.html" target="_blank" rel="external">Intent</a> 传递给 <a href="https://developer.android.google.cn/reference/android/content/Context.html#startActivity(android.content.Intent" target="_blank" rel="external">startActivity()</a>)，您可以启动新的 <a href="https://developer.android.google.cn/reference/android/app/Activity.html" target="_blank" rel="external">Activity</a> 实例。<a href="https://developer.android.google.cn/reference/android/content/Intent.html" target="_blank" rel="external">Intent</a> 描述了要启动的 Activity，并携带了任何必要的数据。</p>
<p>如果您希望在 Activity 完成后收到结果，请调用 <a href="https://developer.android.google.cn/reference/android/app/Activity.html#startActivityForResult(android.content.Intent, int" target="_blank" rel="external">startActivityForResult()</a>)。在 Activity 的 <a href="https://developer.android.google.cn/reference/android/app/Activity.html#onActivityResult(int, int, android.content.Intent" target="_blank" rel="external">onActivityResult()</a>) 回调中，您的 Activity 将结果作为单独的 <a href="https://developer.android.google.cn/reference/android/content/Intent.html" target="_blank" rel="external">Intent</a> 对象接收。如需了解详细信息，请参阅 <a href="https://developer.android.google.cn/guide/components/activities.html" target="_blank" rel="external">Activity</a> 指南。</p>
</li>
<li><p><strong>启动服务</strong>：</p>
<p><a href="https://developer.android.google.cn/reference/android/app/Service.html" target="_blank" rel="external">Service</a> 是一个不使用用户界面而在后台执行操作的组件。通过将 <a href="https://developer.android.google.cn/reference/android/content/Intent.html" target="_blank" rel="external">Intent</a> 传递给 <a href="https://developer.android.google.cn/reference/android/content/Context.html#startService(android.content.Intent" target="_blank" rel="external">startService()</a>)，您可以启动服务执行一次性操作（例如，下载文件）。<a href="https://developer.android.google.cn/reference/android/content/Intent.html" target="_blank" rel="external">Intent</a> 描述了要启动的服务，并携带了任何必要的数据。</p>
<p>如果服务旨在使用客户端-服务器接口，则通过将 <a href="https://developer.android.google.cn/reference/android/content/Intent.html" target="_blank" rel="external">Intent</a> 传递给 <a href="https://developer.android.google.cn/reference/android/content/Context.html#bindService(android.content.Intent, android.content.ServiceConnection, int" target="_blank" rel="external">bindService()</a>)，您可以从其他组件绑定到此服务。如需了解详细信息，请参阅<a href="https://developer.android.google.cn/guide/components/services.html" target="_blank" rel="external">服务</a>指南。</p>
</li>
<li><p><strong>传递广播</strong>：</p>
<p>广播是任何应用均可接收的消息。系统将针对系统事件（例如：系统启动或设备开始充电时）传递各种广播。通过将 <a href="https://developer.android.google.cn/reference/android/content/Intent.html" target="_blank" rel="external">Intent</a> 传递给 <a href="https://developer.android.google.cn/reference/android/content/Context.html#sendBroadcast(android.content.Intent" target="_blank" rel="external">sendBroadcast()</a>)、<a href="https://developer.android.google.cn/reference/android/content/Context.html#sendOrderedBroadcast(android.content.Intent, java.lang.String" target="_blank" rel="external">sendOrderedBroadcast()</a>) 或 <a href="https://developer.android.google.cn/reference/android/content/Context.html#sendStickyBroadcast(android.content.Intent" target="_blank" rel="external">sendStickyBroadcast()</a>)，您可以将广播传递给其他应用。</p>
</li>
</ul>
<h2 id="Intent-类型"><a href="#Intent-类型" class="headerlink" title="Intent 类型"></a>Intent 类型</h2><p>Intent 分为两种类型：</p>
<ul>
<li><strong>显式 Intent</strong>：按名称（完全限定类名）指定要启动的组件。 通常，您会在自己的应用中使用显式 Intent 来启动组件，这是因为您知道要启动的 Activity 或服务的类名。例如，启动新 Activity 以响应用户操作，或者启动服务以在后台下载文件。</li>
<li><strong>隐式 Intent</strong> ：不会指定特定的组件，而是声明要执行的常规操作，从而允许其他应用中的组件来处理它。 例如，如需在地图上向用户显示位置，则可以使用隐式 Intent，请求另一具有此功能的应用在地图上显示指定的位置。</li>
</ul>
<p>创建显式 Intent 启动 Activity 或服务时，系统将立即启动 <a href="https://developer.android.google.cn/reference/android/content/Intent.html" target="_blank" rel="external">Intent</a> 对象中指定的应用组件。</p>
<p><img src="https://developer.android.google.cn/images/components/intent-filters@2x.png" alt=""></p>
<p><strong>图 1.</strong> </p>
<p>隐式 Intent 如何通过系统传递以启动其他 Activity 的图解：<br><strong>[1]</strong> Activity A 创建包含操作描述的 <a href="https://developer.android.google.cn/reference/android/content/Intent.html" target="_blank" rel="external">Intent</a>，并将其传递给 <a href="https://developer.android.google.cn/reference/android/content/Context.html#startActivity(android.content.Intent" target="_blank" rel="external">startActivity()</a>)。<br><strong>[2]</strong> Android 系统搜索所有应用中与 Intent 匹配的 Intent 过滤器。 找到匹配项之后，<br><strong>[3]</strong> 该系统通过调用匹配 Activity（Activity B）的 <a href="https://developer.android.google.cn/reference/android/app/Activity.html#onCreate(android.os.Bundle" target="_blank" rel="external">onCreate()</a>) 方法并将其传递给 <a href="https://developer.android.google.cn/reference/android/content/Intent.html" target="_blank" rel="external">Intent</a>，以此启动匹配 Activity。</p>
<p>创建隐式 Intent 时，Android 系统通过将 Intent 的内容与在设备上其他应用的<a href="https://developer.android.google.cn/guide/topics/manifest/manifest-intro.html" target="_blank" rel="external">清单文件</a>中声明的 Intent 过滤器进行比较，从而找到要启动的相应组件。 如果 Intent 与 Intent 过滤器匹配，则系统将启动该组件，并向其传递 <a href="https://developer.android.google.cn/reference/android/content/Intent.html" target="_blank" rel="external">Intent</a> 对象。 如果多个 Intent 过滤器兼容，则系统会显示一个对话框，支持用户选取要使用的应用。</p>
<p>Intent 过滤器是应用清单文件中的一个表达式，它指定该组件要接收的 Intent 类型。 例如，通过为 Activity 声明 Intent 过滤器，您可以使其他应用能够直接使用某一特定类型的 Intent 启动 Activity。同样，如果您没有为 Activity 声明任何 Intent 过滤器，则 Activity 只能通过显式 Intent 启动。</p>
<p><strong>注意：</strong>为了确保应用的安全性，启动 <a href="https://developer.android.google.cn/reference/android/app/Service.html" target="_blank" rel="external">Service</a> 时，请始终使用显式 Intent，且不要为服务声明 Intent 过滤器。使用隐式 Intent 启动服务存在安全隐患，因为您无法确定哪些服务将响应 Intent，且用户无法看到哪些服务已启动。从 Android 5.0（API 级别 21）开始，如果使用隐式 Intent 调用 <a href="https://developer.android.google.cn/reference/android/content/Context.html#bindService(android.content.Intent, android.content.ServiceConnection, int" target="_blank" rel="external">bindService()</a>)，系统会引发异常。</p>
<h2 id="构建-Intent"><a href="#构建-Intent" class="headerlink" title="构建 Intent"></a>构建 Intent</h2><p><a href="https://developer.android.google.cn/reference/android/content/Intent.html" target="_blank" rel="external">Intent</a> 对象携带了 Android 系统用来确定要启动哪个组件的信息（例如，准确的组件名称或应当接收该 Intent 的组件类别），以及接收组件为了正确执行操作而使用的信息（例如，要采取的操作以及要处理的数据）。</p>
<p><a href="https://developer.android.google.cn/reference/android/content/Intent.html" target="_blank" rel="external">Intent</a> 中包含的主要信息如下：</p>
<p><strong>组件名称</strong></p>
<blockquote>
<p>要启动的组件名称。</p>
<p>这是可选项，但也是构建<strong>显式</strong> Intent 的一项重要信息，这意味着 Intent 应当仅传递给由组件名称定义的应用组件。 如果没有组件名称，则 Intent 是<strong>隐式</strong>的，且系统将根据其他 Intent 信息（例如，以下所述的操作、数据和类别）决定哪个组件应当接收 Intent。 因此，如需在应用中启动特定的组件，则应指定该组件的名称。</p>
<p><strong>注：</strong>启动 <a href="https://developer.android.google.cn/reference/android/app/Service.html" target="_blank" rel="external">Service</a> 时，您应<strong>始终指定组件名称</strong>。 否则，您无法确定哪项服务会响应 Intent，且用户无法看到哪项服务已启动。</p>
<p><a href="https://developer.android.google.cn/reference/android/content/Intent.html" target="_blank" rel="external">Intent</a> 的这一字段是一个 <a href="https://developer.android.google.cn/reference/android/content/ComponentName.html" target="_blank" rel="external">ComponentName</a> 对象，您可以使用目标组件的完全限定类名指定此对象，其中包括应用的软件包名称。 例如， <code>com.example.ExampleActivity</code>。您可以使用 <a href="https://developer.android.google.cn/reference/android/content/Intent.html#setComponent(android.content.ComponentName" target="_blank" rel="external">setComponent()</a>)、<a href="https://developer.android.google.cn/reference/android/content/Intent.html#setClass(android.content.Context, java.lang.Class&lt;?" target="_blank" rel="external">setClass()</a>)、<a href="https://developer.android.google.cn/reference/android/content/Intent.html#setClassName(java.lang.String, java.lang.String" target="_blank" rel="external">setClassName()</a>) 或 <a href="https://developer.android.google.cn/reference/android/content/Intent.html" target="_blank" rel="external">Intent</a> 构造函数设置组件名称。</p>
</blockquote>
<p><strong>操作</strong></p>
<blockquote>
<p>指定要执行的通用操作（例如，“查看”或“选取”）的字符串。</p>
<p>对于广播 Intent，这是指已发生且正在报告的操作。操作在很大程度上决定了其余 Intent 的构成，特别是数据和 extra 中包含的内容。</p>
<p>您可以指定自己的操作，供 Intent 在您的应用内使用（或者供其他应用在您的应用中调用组件）。但是，您通常应该使用由 <a href="https://developer.android.google.cn/reference/android/content/Intent.html" target="_blank" rel="external">Intent</a> 类或其他框架类定义的操作常量。以下是一些用于启动 Activity 的常见操作：</p>
</blockquote>
<p><strong><a href="https://developer.android.google.cn/reference/android/content/Intent.html#ACTION_VIEW" target="_blank" rel="external">ACTION_VIEW</a></strong></p>
<blockquote>
<p>如果您拥有一些某项 Activity 可向用户显示的信息（例如，要使用图库应用查看的照片；或者要使用地图应用查看的地址），请使用 Intent 将此操作与 <a href="https://developer.android.google.cn/reference/android/content/Context.html#startActivity(android.content.Intent" target="_blank" rel="external">startActivity()</a>) 结合使用。</p>
</blockquote>
<p><strong><a href="https://developer.android.google.cn/reference/android/content/Intent.html#ACTION_SEND" target="_blank" rel="external">ACTION_SEND</a></strong></p>
<blockquote>
<p>这也称为“共享”Intent。如果您拥有一些用户可通过其他应用（例如，电子邮件应用或社交共享应用）共享的数据，则应使用 Intent 将此操作与 <a href="https://developer.android.google.cn/reference/android/content/Context.html#startActivity(android.content.Intent" target="_blank" rel="external">startActivity()</a>) 结合使用。</p>
<p>有关更多定义通用操作的常量，请参阅 <a href="https://developer.android.google.cn/reference/android/content/Intent.html" target="_blank" rel="external">Intent</a> 类参考文档。 其他操作在 Android 框架中的其他位置定义。例如，对于在系统的设置应用中打开特定屏幕的操作，将在 <a href="https://developer.android.google.cn/reference/android/provider/Settings.html" target="_blank" rel="external">Settings</a> 中定义。</p>
<p>您可以使用 <a href="https://developer.android.google.cn/reference/android/content/Intent.html#setAction(java.lang.String" target="_blank" rel="external">setAction()</a>) 或 <a href="https://developer.android.google.cn/reference/android/content/Intent.html" target="_blank" rel="external">Intent</a> 构造函数为 Intent 指定操作。</p>
<p>如果定义自己的操作，请确保将应用的软件包名称作为前缀。 例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">static</span> <span class="keyword">final</span> String ACTION_TIMETRAVEL = <span class="string">"com.example.action.TIMETRAVEL"</span>;</div></pre></td></tr></table></figure>
</blockquote>
<p><strong>数据</strong></p>
<blockquote>
<p>引用待操作数据和/或该数据 MIME 类型的 URI（<a href="https://developer.android.google.cn/reference/android/net/Uri.html" target="_blank" rel="external">Uri</a> 对象）。提供的数据类型通常由 Intent 的操作决定。例如，如果操作是 <a href="https://developer.android.google.cn/reference/android/content/Intent.html#ACTION_EDIT" target="_blank" rel="external">ACTION_EDIT</a>，则数据应包含待编辑文档的 URI。</p>
<p>创建 Intent 时，除了指定 URI 以外，指定数据类型（其 MIME 类型）往往也很重要。例如，能够显示图像的 Activity 可能无法播放音频文件，即便 URI 格式十分类似时也是如此。因此，指定数据的 MIME 类型有助于 Android 系统找到接收 Intent 的最佳组件。但有时，MIME 类型可以从 URI 中推断得出，特别当数据是 <code>content:</code> URI 时尤其如此。这表明数据位于设备中，且由 <a href="https://developer.android.google.cn/reference/android/content/ContentProvider.html" target="_blank" rel="external">ContentProvider</a> 控制，这使得数据 MIME 类型对系统可见。</p>
<p>要仅设置数据 URI，请调用 <a href="https://developer.android.google.cn/reference/android/content/Intent.html#setData(android.net.Uri" target="_blank" rel="external">setData()</a>)。 要仅设置 MIME 类型，请调用 <a href="https://developer.android.google.cn/reference/android/content/Intent.html#setType(java.lang.String" target="_blank" rel="external">setType()</a>)。如有必要，您可以使用 <a href="https://developer.android.google.cn/reference/android/content/Intent.html#setDataAndType(android.net.Uri, java.lang.String" target="_blank" rel="external">setDataAndType()</a>) 同时显式设置二者。</p>
<p><strong>注意：</strong>若要同时设置 URI 和 MIME 类型，<strong>请勿</strong>调用 <a href="https://developer.android.google.cn/reference/android/content/Intent.html#setData(android.net.Uri" target="_blank" rel="external">setData()</a>) 和 <a href="https://developer.android.google.cn/reference/android/content/Intent.html#setType(java.lang.String" target="_blank" rel="external">setType()</a>)，因为它们会互相抵消彼此的值。请始终使用 <a href="https://developer.android.google.cn/reference/android/content/Intent.html#setDataAndType(android.net.Uri, java.lang.String" target="_blank" rel="external">setDataAndType()</a>) 同时设置 URI 和 MIME 类型。</p>
</blockquote>
<p><strong>类别</strong></p>
<blockquote>
<p>一个包含应处理 Intent 组件类型的附加信息的字符串。 您可以将任意数量的类别描述放入一个 Intent 中，但大多数 Intent 均不需要类别。 以下是一些常见类别：</p>
</blockquote>
<p><strong><a href="https://developer.android.google.cn/reference/android/content/Intent.html#CATEGORY_BROWSABLE" target="_blank" rel="external">CATEGORY_BROWSABLE</a></strong></p>
<blockquote>
<p>目标 Activity 允许本身通过网络浏览器启动，以显示链接引用的数据，如图像或电子邮件。</p>
</blockquote>
<p><strong><a href="https://developer.android.google.cn/reference/android/content/Intent.html#CATEGORY_LAUNCHER" target="_blank" rel="external">CATEGORY_LAUNCHER</a></strong></p>
<blockquote>
<p>该 Activity 是任务的初始 Activity，在系统的应用启动器中列出。</p>
<p>有关类别的完整列表，请参阅 <a href="https://developer.android.google.cn/reference/android/content/Intent.html" target="_blank" rel="external">Intent</a> 类描述。</p>
<p>您可以使用 <a href="https://developer.android.google.cn/reference/android/content/Intent.html#addCategory(java.lang.String" target="_blank" rel="external">addCategory()</a>) 指定类别。</p>
</blockquote>
<p>以上列出的这些属性（组件名称、操作、数据和类别）表示 Intent 的既定特征。 通过读取这些属性，Android 系统能够解析应当启动哪个应用组件。</p>
<p>但是，Intent 也有可能会一些携带不影响其如何解析为应用组件的信息。 Intent 还可以提供：</p>
<p><strong>Extra</strong></p>
<blockquote>
<p>携带完成请求操作所需的附加信息的键值对。正如某些操作使用特定类型的数据 URI 一样，有些操作也使用特定的 extra。</p>
<p>您可以使用各种 <a href="https://developer.android.google.cn/reference/android/content/Intent.html#putExtra(java.lang.String, android.os.Bundle" target="_blank" rel="external">putExtra()</a>) 方法添加 extra 数据，每种方法均接受两个参数：键名和值。您还可以创建一个包含所有 extra 数据的 <a href="https://developer.android.google.cn/reference/android/os/Bundle.html" target="_blank" rel="external">Bundle</a> 对象，然后使用 <a href="https://developer.android.google.cn/reference/android/content/Intent.html#putExtras(android.content.Intent" target="_blank" rel="external">putExtras()</a>) 将<a href="https://developer.android.google.cn/reference/android/os/Bundle.html" target="_blank" rel="external">Bundle</a> 插入 <a href="https://developer.android.google.cn/reference/android/content/Intent.html" target="_blank" rel="external">Intent</a> 中。</p>
<p>例如，使用 <a href="https://developer.android.google.cn/reference/android/content/Intent.html#ACTION_SEND" target="_blank" rel="external">ACTION_SEND</a> 创建用于发送电子邮件的 Intent 时，可以使用 <a href="https://developer.android.google.cn/reference/android/content/Intent.html#EXTRA_EMAIL" target="_blank" rel="external">EXTRA_EMAIL</a> 键指定“目标”收件人，并使用 <a href="https://developer.android.google.cn/reference/android/content/Intent.html#EXTRA_SUBJECT" target="_blank" rel="external">EXTRA_SUBJECT</a> 键指定“主题”。</p>
<p><a href="https://developer.android.google.cn/reference/android/content/Intent.html" target="_blank" rel="external">Intent</a> 类将为标准化的数据类型指定多个 <code>EXTRA_*</code> 常量。如需声明自己的 extra 键（对于应用接收的 Intent），请确保将应用的软件包名称作为前缀。 例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">static final String EXTRA_GIGAWATTS = &quot;com.example.EXTRA_GIGAWATTS&quot;;</div></pre></td></tr></table></figure>
</blockquote>
<p></p>
<dt><strong>标志</strong></dt>

<blockquote>
<p>在 <a href="https://developer.android.google.cn/reference/android/content/Intent.html" target="_blank" rel="external">Intent</a> 类中定义的、充当 Intent 元数据的标志。 标志可以指示 Android 系统如何启动 Activity（例如，Activity 应属于哪个<a href="https://developer.android.google.cn/guide/components/tasks-and-back-stack.html" target="_blank" rel="external">任务</a>），以及启动之后如何处理（例如，它是否属于最近的 Activity 列表）。</p>
<p>如需了解详细信息，请参阅 <a href="https://developer.android.google.cn/reference/android/content/Intent.html#setFlags(int" target="_blank" rel="external">setFlags()</a>) 方法。</p>
</blockquote>
<h3 id="显式-Intent-示例"><a href="#显式-Intent-示例" class="headerlink" title="显式 Intent 示例"></a>显式 Intent 示例</h3><p>显式 Intent 是指用于启动某个特定应用组件（例如，应用中的某个特定 Activity 或服务）的 Intent。 要创建显式 Intent，请为 <a href="https://developer.android.google.cn/reference/android/content/Intent.html" target="_blank" rel="external">Intent</a> 对象定义组件名称 — Intent 的所有其他属性均为可选属性。</p>
<p>例如，如果在应用中构建了一个名为 <code>DownloadService</code>、旨在从网页下载文件的服务，则可使用以下代码启动该服务：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Executed in an Activity, so 'this' is the [Context](https://developer.android.google.cn/reference/android/content/Context.html)</span></div><div class="line"><span class="comment">// The fileUrl is a string URL, such as "http://www.example.com/image.png"</span></div><div class="line">Intent downloadIntent = <span class="keyword">new</span> Intent(<span class="keyword">this</span>, DownloadService.class);</div><div class="line">downloadIntent.setData([Uri.parse](https:<span class="comment">//developer.android.google.cn/reference/android/net/Uri.html#parse(java.lang.String))(fileUrl));</span></div><div class="line">startService(downloadIntent);</div></pre></td></tr></table></figure>
<p><a href="https://developer.android.google.cn/reference/android/content/Intent.html#Intent(android.content.Context, java.lang.Class&lt;?" target="_blank" rel="external">Intent(Context, Class)</a>) 构造函数分别为应用和组件提供 <a href="https://developer.android.google.cn/reference/android/content/Context.html" target="_blank" rel="external">Context</a> 和 <a href="https://developer.android.google.cn/reference/java/lang/Class.html" target="_blank" rel="external">Class</a> 对象。因此，此 Intent 将显式启动该应用中的 <code>DownloadService</code> 类。</p>
<p>如需了解有关构建和启动服务的详细信息，请参阅<a href="https://developer.android.google.cn/guide/components/services.html" target="_blank" rel="external">服务</a>指南。</p>
<h3 id="隐式-Intent-示例"><a href="#隐式-Intent-示例" class="headerlink" title="隐式 Intent 示例"></a>隐式 Intent 示例</h3><p>隐式 Intent 指定能够在可以执行相应操作的设备上调用任何应用的操作。 如果您的应用无法执行该操作而其他应用可以，且您希望用户选取要使用的应用，则使用隐式 Intent 非常有用。</p>
<p>例如，如果您希望用户与他人共享您的内容，请使用 <a href="https://developer.android.google.cn/reference/android/content/Intent.html#ACTION_SEND" target="_blank" rel="external">ACTION_SEND</a> 操作创建 Intent，并添加指定共享内容的 extra。 使用该 Intent 调用 <a href="https://developer.android.google.cn/reference/android/content/Context.html#startActivity(android.content.Intent" target="_blank" rel="external">startActivity()</a>) 时，用户可以选取共享内容所使用的应用。</p>
<p><strong>注意：</strong>用户可能没有任何应用处理您发送到 <a href="https://developer.android.google.cn/reference/android/content/Context.html#startActivity(android.content.Intent" target="_blank" rel="external">startActivity()</a>) 的隐式 Intent。如果出现这种情况，则调用将会失败，且应用会崩溃。要验证 Activity 是否会接收 Intent，请对 <a href="https://developer.android.google.cn/reference/android/content/Intent.html" target="_blank" rel="external">Intent</a> 对象调用 <a href="https://developer.android.google.cn/reference/android/content/Intent.html#resolveActivity(android.content.pm.PackageManager" target="_blank" rel="external">resolveActivity()</a>)。如果结果为非空，则至少有一个应用能够处理该 Intent，且可以安全调用 <a href="https://developer.android.google.cn/reference/android/content/Context.html#startActivity(android.content.Intent" target="_blank" rel="external">startActivity()</a>)。 如果结果为空，则不应使用该 Intent。如有可能，您应停用发出该 Intent 的功能。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Create the text message with a string</span></div><div class="line">Intent sendIntent = <span class="keyword">new</span> Intent();</div><div class="line">sendIntent.setAction(Intent.ACTION_SEND);</div><div class="line">sendIntent.putExtra(Intent.EXTRA_TEXT, textMessage);</div><div class="line">sendIntent.setType(<span class="string">"text/plain"</span>);</div><div class="line"></div><div class="line"><span class="comment">// Verify that the intent will resolve to an activity</span></div><div class="line"><span class="keyword">if</span> (sendIntent.resolveActivity(getPackageManager()) != <span class="keyword">null</span>) &#123;</div><div class="line">    startActivity(sendIntent);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>注：</strong>在这种情况下，系统并没有使用 URI，但已声明 Intent 的数据类型，用于指定 extra 携带的内容。</p>
<p>调用 <a href="https://developer.android.google.cn/reference/android/content/Context.html#startActivity(android.content.Intent" target="_blank" rel="external">startActivity()</a>) 时，系统将检查已安装的所有应用，确定哪些应用能够处理这种 Intent（即：含 <a href="https://developer.android.google.cn/reference/android/content/Intent.html#ACTION_SEND" target="_blank" rel="external">ACTION_SEND</a> 操作并携带“text/plain”数据的 Intent ）。 如果只有一个应用能够处理，则该应用将立即打开并为其提供 Intent。 如果多个 Activity 接受 Intent，则系统将显示一个对话框，使用户能够选取要使用的应用。</p>
<div class="figure" style="width:200px"><img src="https://developer.android.google.cn/images/training/basics/intent-chooser.png" alt=""><br><br><strong>图 2.</strong> 选择器对话框。<br><br></div>

<h3 id="强制使用应用选择器"><a href="#强制使用应用选择器" class="headerlink" title="强制使用应用选择器"></a>强制使用应用选择器</h3><p>如果有多个应用响应隐式 Intent，则用户可以选择要使用的应用，并将其设置为该操作的默认选项。 如果用户可能希望今后一直使用相同的应用执行某项操作（例如，打开网页时，用户往往倾向于仅使用一种网络浏览器），则这一点十分有用。</p>
<p>但是，如果多个应用可以响应 Intent，且用户可能希望每次使用不同的应用，则应采用显式方式显示选择器对话框。 选择器对话框每次都会要求用户选择用于操作的应用（用户无法为该操作选择默认应用）。 例如，当应用使用 <a href="https://developer.android.google.cn/reference/android/content/Intent.html#ACTION_SEND" target="_blank" rel="external">ACTION_SEND</a> 操作执行“共享”时，用户根据目前的状况可能需要使用另一不同的应用，因此应当始终使用选择器对话框，如图 2 中所示。</p>
<p>要显示选择器，请使用 <a href="https://developer.android.google.cn/reference/android/content/Intent.html#createChooser(android.content.Intent, java.lang.CharSequence" target="_blank" rel="external">createChooser()</a>) 创建 <a href="https://developer.android.google.cn/reference/android/content/Intent.html" target="_blank" rel="external">Intent</a>，并将其传递给 <a href="https://developer.android.google.cn/reference/android/app/Activity.html#startActivity(android.content.Intent" target="_blank" rel="external">startActivity()</a>)。例如：</p>
<pre>Intent sendIntent = new Intent(Intent.ACTION_SEND);
...

// Always use string resources for UI text.
// This says something like "Share this photo with"
String title = getResources().getString(R.string.chooser_title);
// Create intent to show the chooser dialog
Intent chooser = Intent.createChooser(sendIntent, title);

// Verify the original intent will resolve to at least one activity
if (sendIntent.resolveActivity(getPackageManager()) != null) {
    startActivity(chooser);
}
</pre>

<p>这将显示一个对话框，其中有响应传递给 <a href="https://developer.android.google.cn/reference/android/content/Intent.html#createChooser(android.content.Intent, java.lang.CharSequence" target="_blank" rel="external">createChooser()</a>) 方法的 Intent 的应用列表，并且将提供的文本用作对话框标题。</p>
<h2 id="接收隐式-Intent"><a href="#接收隐式-Intent" class="headerlink" title="接收隐式 Intent"></a>接收隐式 Intent</h2><p>要公布应用可以接收哪些隐式 Intent，请在<a href="https://developer.android.google.cn/guide/topics/manifest/manifest-intro.html" target="_blank" rel="external">清单文件</a>中使用 <a href="https://developer.android.google.cn/guide/topics/manifest/intent-filter-element.html" target="_blank" rel="external"><code>&lt;intent-filter&gt;</code></a> 元素为每个应用组件声明一个或多个 Intent 过滤器。每个 Intent 过滤器均根据 Intent 的操作、数据和类别指定自身接受的 Intent 类型。 仅当隐式 Intent 可以通过 Intent 过滤器之一传递时，系统才会将该 Intent 传递给应用组件。</p>
<p><strong>注：</strong>显式 Intent 始终会传递给其目标，无论组件声明的 Intent 过滤器如何均是如此。</p>
<p>应用组件应当为自身可执行的每个独特作业声明单独的过滤器。例如，图像库应用中的一个 Activity 可能会有两个过滤器，分别用于查看图像和编辑图像。 当 Activity 启动时，它将检查 <a href="https://developer.android.google.cn/reference/android/content/Intent.html" target="_blank" rel="external">Intent</a> 并根据 <a href="https://developer.android.google.cn/reference/android/content/Intent.html" target="_blank" rel="external">Intent</a> 中的信息决定具体的行为（例如，是否显示编辑器控件）。</p>
<p>每个 Intent 过滤器均由应用清单文件中的 <a href="https://developer.android.google.cn/guide/topics/manifest/intent-filter-element.html" target="_blank" rel="external"><code>&lt;intent-filter&gt;</code></a> 元素定义，并嵌套在相应的应用组件（例如，<a href="https://developer.android.google.cn/guide/topics/manifest/activity-element.html" target="_blank" rel="external"><code>&lt;activity&gt;</code></a> 元素）中。 在 <a href="https://developer.android.google.cn/guide/topics/manifest/intent-filter-element.html" target="_blank" rel="external"><code>&lt;intent-filter&gt;</code></a> 内部，您可以使用以下三个元素中的一个或多个指定要接受的 Intent 类型：</p>
<dl><br><br><dt><a href="https://developer.android.google.cn/guide/topics/manifest/action-element.html" target="_blank" rel="external"><code>&lt;action&gt;</code></a></dt><br><br><dd>在 <code>name</code> 属性中，声明接受的 Intent 操作。该值必须是操作的文本字符串值，而不是类常量。</dd><br><br><dt><a href="https://developer.android.google.cn/guide/topics/manifest/data-element.html" target="_blank" rel="external"><code>&lt;data&gt;</code></a></dt><br><br><dd>使用一个或多个指定数据 URI 各个方面（<code>scheme</code>、<code>host</code>、<code>port</code>、<code>path</code> 等）和 MIME 类型的属性，声明接受的数据类型。</dd><br><br><dt><a href="https://developer.android.google.cn/guide/topics/manifest/category-element.html" target="_blank" rel="external"><code>&lt;category&gt;</code></a></dt><br><br><dd>在 <code>name</code> 属性中，声明接受的 Intent 类别。该值必须是操作的文本字符串值，而不是类常量。<br><br><strong>注：</strong>为了接收隐式 Intent，<strong>必须</strong>将 <a href="https://developer.android.google.cn/reference/android/content/Intent.html#CATEGORY_DEFAULT" target="_blank" rel="external">CATEGORY_DEFAULT</a> 类别包括在 Intent 过滤器中。 方法 <a href="https://developer.android.google.cn/reference/android/app/Activity.html#startActivity(android.content.Intent" target="_blank" rel="external">startActivity()</a>) 和 <a href="https://developer.android.google.cn/reference/android/app/Activity.html#startActivityForResult(android.content.Intent, int" target="_blank" rel="external">startActivityForResult()</a>) 将按照已申明 <a href="https://developer.android.google.cn/reference/android/content/Intent.html#CATEGORY_DEFAULT" target="_blank" rel="external">CATEGORY_DEFAULT</a> 类别的方式处理所有 Intent。 如果未在 Intent 过滤器中声明此类别，则隐式 Intent 不会解析为您的 Activity。<br><br></dd><br><br></dl>

<p>例如，以下是一个使用包含 Intent 过滤器的 Activity 声明，当数据类型为文本时，系统将接收 <a href="https://developer.android.google.cn/reference/android/content/Intent.html#ACTION_SEND" target="_blank" rel="external">ACTION_SEND</a> Intent ：</p>
<pre><activity android:name="ShareActivity">
    <intent-filter>
        <action android:name="android.intent.action.SEND">
        <category android:name="android.intent.category.DEFAULT">
        <data android:mimetype="text/plain">
    </data></category></action></intent-filter>
</activity>
</pre>

<p>您可以创建一个包括多个 <a href="https://developer.android.google.cn/guide/topics/manifest/action-element.html" target="_blank" rel="external"><code>&lt;action&gt;</code></a>、<a href="https://developer.android.google.cn/guide/topics/manifest/data-element.html" target="_blank" rel="external"><code>&lt;data&gt;</code></a> 或 <a href="https://developer.android.google.cn/guide/topics/manifest/category-element.html" target="_blank" rel="external"><code>&lt;category&gt;</code></a> 实例的过滤器。创建时，仅需确定组件能够处理这些过滤器元素的任何及所有组合即可。</p>
<p>如需仅以操作、数据和类别类型的特定组合来处理多种 Intent，则需创建多个 Intent 过滤器。</p>
<div class="sidebox-wrapper"><br><br><div class="sidebox"><br><br>## 限制对组件的访问<br><br>使用 Intent 过滤器时，无法安全地防止其他应用启动组件。 尽管 Intent 过滤器将组件限制为仅响应特定类型的隐式 Intent，但如果开发者确定您的组件名称，则其他应用有可能通过使用显式 Intent 启动您的应用组件。如果必须确保<em>只有您自己的应用</em>才能启动您的某一组件，请针对该组件将 <a href="https://developer.android.google.cn/guide/topics/manifest/activity-element.html#exported" target="_blank" rel="external"><code>exported</code></a> 属性设置为 <code>&quot;false&quot;</code>。<br><br></div>

<p></p></div><p></p>
<p>系统通过将 Intent 与所有这三个元素进行比较，根据过滤器测试隐式 Intent。 隐式 Intent 若要传递给组件，必须通过所有这三项测试。如果 Intent 甚至无法匹配其中任何一项测试，则 Android 系统不会将其传递给组件。 但是，由于一个组件可能有多个 Intent 过滤器，因此未能通过某一组件过滤器的 Intent 可能会通过另一过滤器。如需了解有关系统如何解析 Intent 的详细信息，请参阅下文的 <a href="#Resolution">Intent 解析</a>部分。</p>
<p><strong>注意：</strong>为了避免无意中运行不同应用的 <a href="https://developer.android.google.cn/reference/android/app/Service.html" target="_blank" rel="external">Service</a>，请始终使用显式 Intent 启动您自己的服务，且不必为该服务声明 Intent 过滤器。</p>
<p><strong>注：</strong>对于所有 Activity，您必须在清单文件中声明 Intent 过滤器。但是，广播接收器的过滤器可以通过调用 <a href="https://developer.android.google.cn/reference/android/content/Context.html#registerReceiver(android.content.BroadcastReceiver, android.content.IntentFilter, java.lang.String, android.os.Handler" target="_blank" rel="external">registerReceiver()</a>) 动态注册。 稍后，您可以使用 <a href="https://developer.android.google.cn/reference/android/content/Context.html#unregisterReceiver(android.content.BroadcastReceiver" target="_blank" rel="external">unregisterReceiver()</a>) 注销该接收器。这样一来，应用便可仅在应用运行时的某一指定时间段内侦听特定的广播。</p>
<h3 id="过滤器示例"><a href="#过滤器示例" class="headerlink" title="过滤器示例"></a>过滤器示例</h3><p>为了更好地了解一些 Intent 过滤器的行为，我们一起来看看从社交共享应用的清单文件中截取的以下片段。</p>
<pre><activity android:name="MainActivity">
    <!-- This activity is the main entry, should appear in app launcher -->
    <intent-filter>
        <action android:name="android.intent.action.MAIN">
        <category android:name="android.intent.category.LAUNCHER">
    </category></action></intent-filter>
</activity>

<activity android:name="ShareActivity">
    <!-- This activity handles "SEND" actions with text data -->
    <intent-filter>
        <action android:name="android.intent.action.SEND">
        <category android:name="android.intent.category.DEFAULT">
        <data android:mimetype="text/plain">
    </data></category></action></intent-filter>
    <!-- This activity also handles "SEND" and "SEND_MULTIPLE" with media data -->
    <intent-filter>
        <action android:name="android.intent.action.SEND">
        <action android:name="android.intent.action.SEND_MULTIPLE">
        <category android:name="android.intent.category.DEFAULT">
        <data android:mimetype="application/vnd.google.panorama360+jpg">
        <data android:mimetype="image/*">
        <data android:mimetype="video/*">
    </data></data></data></category></action></action></intent-filter>
</activity>
</pre>

<p>第一个 Activity <code>MainActivity</code> 是应用的主要入口点。当用户最初使用启动器图标启动应用时，该 Activity 将打开：</p>
<ul>
<li><a href="https://developer.android.google.cn/reference/android/content/Intent.html#ACTION_MAIN" target="_blank" rel="external">ACTION_MAIN</a> 操作指示这是主要入口点，且不要求输入任何 Intent 数据。</li>
<li><a href="https://developer.android.google.cn/reference/android/content/Intent.html#CATEGORY_LAUNCHER" target="_blank" rel="external">CATEGORY_LAUNCHER</a> 类别指示此 Activity 的图标应放入系统的应用启动器。 如果 <a href="https://developer.android.google.cn/guide/topics/manifest/activity-element.html" target="_blank" rel="external"><code>&lt;activity&gt;</code></a> 元素未使用 <code>icon</code> 指定图标，则系统将使用 <a href="https://developer.android.google.cn/guide/topics/manifest/application-element.html" target="_blank" rel="external"><code>&lt;application&gt;</code></a> 元素中的图标。</li>
</ul>
<p>这两个元素必须配对使用，Activity 才会显示在应用启动器中。</p>
<p>第二个 Activity <code>ShareActivity</code> 旨在便于共享文本和媒体内容。 尽管用户可以通过从 <code>MainActivity</code> 导航进入此 Activity，但也可以从发出隐式 Intent（与两个 Intent 过滤器之一匹配）的另一应用中直接进入 <code>ShareActivity</code>。</p>
<p><strong>注：</strong>MIME 类型 <a href="https://developers.google.cn/panorama/android/" target="_blank" rel="external"><code>application/vnd.google.panorama360+jpg</code></a> 是一个指定全景照片的特殊数据类型，您可以使用 <a href="https://developer.android.google.cn/reference/com/google/android/gms/panorama/package-summary.html" target="_blank" rel="external">Google panorama</a> API 对其进行处理。</p>
<h2 id="使用待定-Intent"><a href="#使用待定-Intent" class="headerlink" title="使用待定 Intent"></a>使用待定 Intent</h2><p><a href="https://developer.android.google.cn/reference/android/app/PendingIntent.html" target="_blank" rel="external">PendingIntent</a> 对象是 <a href="https://developer.android.google.cn/reference/android/content/Intent.html" target="_blank" rel="external">Intent</a> 对象的包装器。<a href="https://developer.android.google.cn/reference/android/app/PendingIntent.html" target="_blank" rel="external">PendingIntent</a> 的主要目的是授权外部应用使用包含的 <a href="https://developer.android.google.cn/reference/android/content/Intent.html" target="_blank" rel="external">Intent</a>，就像是它从您应用本身的进程中执行的一样。</p>
<p>待定 Intent 的主要用例包括：</p>
<ul>
<li>声明用户使用您的<a href="https://developer.android.google.cn/guide/topics/ui/notifiers/notifications.html" target="_blank" rel="external">通知</a>执行操作时所要执行的 Intent（Android 系统的 <a href="https://developer.android.google.cn/reference/android/app/NotificationManager.html" target="_blank" rel="external">NotificationManager</a> 执行 <a href="https://developer.android.google.cn/reference/android/content/Intent.html" target="_blank" rel="external">Intent</a>）。</li>
<li>声明用户使用您的 <a href="https://developer.android.google.cn/guide/topics/appwidgets/index.html" target="_blank" rel="external">应用小部件</a>执行操作时要执行的 Intent（主屏幕应用执行 <a href="https://developer.android.google.cn/reference/android/content/Intent.html" target="_blank" rel="external">Intent</a>）。</li>
<li>声明未来某一特定时间要执行的 Intent（Android 系统的 <a href="https://developer.android.google.cn/reference/android/app/AlarmManager.html" target="_blank" rel="external">AlarmManager</a> 执行 <a href="https://developer.android.google.cn/reference/android/content/Intent.html" target="_blank" rel="external">Intent</a>）。</li>
</ul>
<p>由于每个 <a href="https://developer.android.google.cn/reference/android/content/Intent.html" target="_blank" rel="external">Intent</a> 对象均设计为由特定类型的应用组件（<a href="https://developer.android.google.cn/reference/android/app/Activity.html" target="_blank" rel="external">Activity</a>、<a href="https://developer.android.google.cn/reference/android/app/Service.html" target="_blank" rel="external">Service</a> 或 <a href="https://developer.android.google.cn/reference/android/content/BroadcastReceiver.html" target="_blank" rel="external">BroadcastReceiver</a>）进行处理，因此还必须基于相同的考虑因素创建 <a href="https://developer.android.google.cn/reference/android/app/PendingIntent.html" target="_blank" rel="external">PendingIntent</a>。使用待定 Intent 时，应用不会使用调用（如 <a href="https://developer.android.google.cn/reference/android/content/Context.html#startActivity(android.content.Intent" target="_blank" rel="external">startActivity()</a>)）执行该 Intent。相反，通过调用相应的创建器方法创建 <a href="https://developer.android.google.cn/reference/android/app/PendingIntent.html" target="_blank" rel="external">PendingIntent</a> 时，您必须声明所需的组件类型：</p>
<ul>
<li><a href="https://developer.android.google.cn/reference/android/app/PendingIntent.html#getActivity(android.content.Context, int, android.content.Intent, int" target="_blank" rel="external">PendingIntent.getActivity()</a>)，适用于启动 <a href="https://developer.android.google.cn/reference/android/app/Activity.html" target="_blank" rel="external">Activity</a> 的 <a href="https://developer.android.google.cn/reference/android/content/Intent.html" target="_blank" rel="external">Intent</a>。</li>
<li><a href="https://developer.android.google.cn/reference/android/app/PendingIntent.html#getService(android.content.Context, int, android.content.Intent, int" target="_blank" rel="external">PendingIntent.getService()</a>)，适用于启动 <a href="https://developer.android.google.cn/reference/android/app/Service.html" target="_blank" rel="external">Service</a> 的 <a href="https://developer.android.google.cn/reference/android/content/Intent.html" target="_blank" rel="external">Intent</a>。</li>
<li><a href="https://developer.android.google.cn/reference/android/app/PendingIntent.html#getBroadcast(android.content.Context, int, android.content.Intent, int" target="_blank" rel="external">PendingIntent.getBroadcast()</a>)，适用于启动 <a href="https://developer.android.google.cn/reference/android/content/BroadcastReceiver.html" target="_blank" rel="external">BroadcastReceiver</a> 的 <a href="https://developer.android.google.cn/reference/android/content/Intent.html" target="_blank" rel="external">Intent</a>。</li>
</ul>
<p>除非您的应用正在从其他应用中接收待定 Intent，否则上述用于创建 <a href="https://developer.android.google.cn/reference/android/app/PendingIntent.html" target="_blank" rel="external">PendingIntent</a> 的方法可能是您所需的唯一 <a href="https://developer.android.google.cn/reference/android/app/PendingIntent.html" target="_blank" rel="external">PendingIntent</a> 方法。</p>
<p>每种方法均会提取当前的应用 <a href="https://developer.android.google.cn/reference/android/content/Context.html" target="_blank" rel="external">Context</a>、您要包装的 <a href="https://developer.android.google.cn/reference/android/content/Intent.html" target="_blank" rel="external">Intent</a> 以及一个或多个指定应如何使用该 Intent 的标志（例如，是否可以多次使用该 Intent）。</p>
<p>如需了解有关使用待定 Intent 的详细信息，请参阅<a href="https://developer.android.google.cn/guide/topics/ui/notifiers/notifications.html" target="_blank" rel="external">通知</a>和<a href="https://developer.android.google.cn/guide/topics/appwidgets/index.html" target="_blank" rel="external">应用小部件</a> API 指南等手册中每个相应用例的相关文档。</p>
<h2 id="Intent-解析"><a href="#Intent-解析" class="headerlink" title="Intent 解析"></a>Intent 解析</h2><p>当系统收到隐式 Intent 以启动 Activity 时，它根据以下三个方面将该 Intent 与 Intent 过滤器进行比较，搜索该 Intent 的最佳 Activity：</p>
<ul>
<li>Intent 操作</li>
<li>Intent 数据（URI 和数据类型）</li>
<li>Intent 类别</li>
</ul>
<p>下文根据如何在应用的清单文件中声明 Intent 过滤器，描述 Intent 如何与相应的组件匹配。</p>
<h3 id="操作测试"><a href="#操作测试" class="headerlink" title="操作测试"></a>操作测试</h3><p>要指定接受的 Intent 操作，Intent 过滤器既可以不声明任何 <a href="https://developer.android.google.cn/guide/topics/manifest/action-element.html" target="_blank" rel="external"><code>&lt;action&gt;</code></a> 元素，也可以声明多个此类元素。例如：</p>
<pre><intent-filter>
    <action android:name="android.intent.action.EDIT">
    <action android:name="android.intent.action.VIEW">
    ...
</action></action></intent-filter>
</pre>

<p>要通过此过滤器，您在 <a href="https://developer.android.google.cn/reference/android/content/Intent.html" target="_blank" rel="external">Intent</a> 中指定的操作必须与过滤器中列出的某一操作匹配。</p>
<p>如果该过滤器未列出任何操作，则 Intent 没有任何匹配项，因此所有 Intent 均无法通过测试。 但是，如果 <a href="https://developer.android.google.cn/reference/android/content/Intent.html" target="_blank" rel="external">Intent</a> 未指定操作，则会通过测试（只要过滤器至少包含一个操作）。</p>
<h3 id="类别测试"><a href="#类别测试" class="headerlink" title="类别测试"></a>类别测试</h3><p>要指定接受的 Intent 类别， Intent 过滤器既可以不声明任何 <a href="https://developer.android.google.cn/guide/topics/manifest/category-element.html" target="_blank" rel="external"><code>&lt;category&gt;</code></a> 元素，也可以声明多个此类元素。 例如：</p>
<pre><intent-filter>
    <category android:name="android.intent.category.DEFAULT">
    <category android:name="android.intent.category.BROWSABLE">
    ...
</category></category></intent-filter>
</pre>

<p>若要使 Intent 通过类别测试，则 <a href="https://developer.android.google.cn/reference/android/content/Intent.html" target="_blank" rel="external">Intent</a> 中的每个类别均必须与过滤器中的类别匹配。反之则未必然，Intent 过滤器声明的类别可以超出 <a href="https://developer.android.google.cn/reference/android/content/Intent.html" target="_blank" rel="external">Intent</a> 中指定的数量，且 <a href="https://developer.android.google.cn/reference/android/content/Intent.html" target="_blank" rel="external">Intent</a> 仍会通过测试。 因此，不含类别的 Intent 应当始终会通过此测试，无论过滤器中声明何种类别均是如此。</p>
<p><strong>注</strong>：Android 会自动将 <a href="https://developer.android.google.cn/reference/android/content/Intent.html#CATEGORY_DEFAULT" target="_blank" rel="external">CATEGORY_DEFAULT</a> 类别应用于传递给 <a href="https://developer.android.google.cn/reference/android/content/Context.html#startActivity(android.content.Intent" target="_blank" rel="external">startActivity()</a>) 和 <a href="https://developer.android.google.cn/reference/android/app/Activity.html#startActivityForResult(android.content.Intent, int" target="_blank" rel="external">startActivityForResult()</a>) 的所有隐式 Intent。因此，如需 Activity 接收隐式 Intent，则必须将 <code>&quot;android.intent.category.DEFAULT&quot;</code> 的类别包括在其 Intent 过滤器中（如上文的 <code>&lt;intent-filter&gt;</code> 示例所示）。</p>
<h3 id="数据测试"><a href="#数据测试" class="headerlink" title="数据测试"></a>数据测试</h3><p>要指定接受的 Intent 数据， Intent 过滤器既可以不声明任何 <a href="https://developer.android.google.cn/guide/topics/manifest/data-element.html" target="_blank" rel="external"><code>&lt;data&gt;</code></a> 元素，也可以声明多个此类元素。 例如：</p>
<pre><intent-filter>
    <data android:mimetype="video/mpeg" android:scheme="http" ...="">
    <data android:mimetype="audio/mpeg" android:scheme="http" ...="">
    ...
</data></data></intent-filter>
</pre>

<p>每个 <a href="https://developer.android.google.cn/guide/topics/manifest/data-element.html" target="_blank" rel="external"><data></data></a> 元素均可指定 URI 结构和数据类型（MIME 媒体类型）。 URI 的每个部分均包含单独的 <code>scheme</code>、<code>host</code>、<code>port</code> 和 <code>path</code> 属性：</p>
<p><code>&lt;scheme&gt;://&lt;host&gt;:&lt;port&gt;/&lt;path&gt;</code></p>
<p>例如：</p>
<p><code>content://com.example.project:200/folder/subfolder/etc</code></p>
<p>在此 URI 中，架构是 <code>content</code>，主机是　<code>com.example.project</code>，端口是 <code>200</code>，路径是 <code>folder/subfolder/etc</code>。</p>
<p>在 <a href="https://developer.android.google.cn/guide/topics/manifest/data-element.html" target="_blank" rel="external"><code>&lt;data&gt;</code></a> 元素中，上述每个属性均为可选，但存在线性依赖关系：</p>
<ul>
<li>如果未指定架构，则会忽略主机。</li>
<li>如果未指定主机，则会忽略端口。</li>
<li>如果未指定架构和主机，则会忽略路径。</li>
</ul>
<p>将 Intent 中的 URI 与过滤器中的 URI 规范进行比较时，它仅与过滤器中包含的部分 URI 进行比较。 例如：</p>
<ul>
<li>如果过滤器仅指定架构，则具有该架构的所有 URI 均与该过滤器匹配。</li>
<li>如果过滤器指定架构和权限，但未指定路径，则具有相同架构和权限的所有 URI 都会通过过滤器，无论其路径如何均是如此。</li>
<li>如果过滤器指定架构、权限和路径，则仅具有相同架构、权限和路径的 URI 才会通过过滤器。</li>
</ul>
<p><strong>注：</strong>路径规范可以包含星号通配符 (*)，因此仅需部分匹配路径名即可。</p>
<p>数据测试会将 Intent 中的 URI 和 MIME 类型与过滤器中指定的 URI 和 MIME 类型进行比较。 规则如下：</p>
<ol>
<li>仅当过滤器未指定任何 URI 或 MIME 类型时，不含 URI 和 MIME 类型的 Intent 才会通过测试。</li>
<li>对于包含 URI 但不含 MIME 类型（既未显式声明，也无法通过 URI 推断得出）的 Intent，仅当其 URI 与过滤器的 URI 格式匹配、且过滤器同样未指定 MIME 类型时，才会通过测试。</li>
<li>仅当过滤器列出相同的 MIME 类型且未指定 URI 格式时，包含 MIME 类型、但不含 URI 的 Intent 才会通过测试。</li>
<li>仅当 MIME 类型与过滤器中列出的类型匹配时，同时包含 URI 类型和 MIME 类型（通过显式声明，或可以通过 URI 推断得出）的 Intent 才会通过测试的 MIME 类型部分。 如果 Intent 的 URI 与过滤器中的 URI 匹配，或者如果 Intent 具有 <code>content:</code> 或 <code>file:</code> URI 且过滤器未指定 URI，则 Intent 会通过测试的 URI 部分。 换言之，如果过滤器只是列出 MIME 类型，则假定组件支持 <code>content:</code> 和 <code>file:</code> 数据。</li>
</ol>
<p>最后一条规则，即规则 (d)，反映了期望组件能够从文件中或内容提供程序获得本地数据。因此，其过滤器可以仅列出数据类型，而不必显式命名 <code>content:</code> 和 <code>file:</code> 架构。这是一个典型的案例。 例如，下文中的 <a href="https://developer.android.google.cn/guide/topics/manifest/data-element.html" target="_blank" rel="external"><code>&lt;data&gt;</code></a> 元素向 Android 指出，组件可从内容提供商处获得并显示图像数据：</p>
<pre><intent-filter>
    <data android:mimetype="image/*">
    ...
</data></intent-filter></pre>

<p>由于大部分可用数据均由内容提供商分发，因此指定数据类型（而非 URI）的过滤器也许最为常见。</p>
<p>另一常见的配置是具有架构和数据类型的过滤器。例如，下文中的 <a href="https://developer.android.google.cn/guide/topics/manifest/data-element.html" target="_blank" rel="external"><code>&lt;data&gt;</code></a> 元素向 Android 指出，组件可从网络中检索视频数据以执行操作：</p>
<pre><intent-filter>
    <data android:scheme="http" android:type="video/*">
    ...
</data></intent-filter></pre>

<h3 id="Intent-匹配"><a href="#Intent-匹配" class="headerlink" title="Intent 匹配"></a>Intent 匹配</h3><p>通过 Intent 过滤器匹配 Intent，这不仅有助于发现要激活的目标组件，还有助于发现设备上组件集的相关信息。 例如，主页应用通过使用指定 <a href="https://developer.android.google.cn/reference/android/content/Intent.html#ACTION_MAIN" target="_blank" rel="external">ACTION_MAIN</a> 操作和 <a href="https://developer.android.google.cn/reference/android/content/Intent.html#CATEGORY_LAUNCHER" target="_blank" rel="external">CATEGORY_LAUNCHER</a> 类别的 Intent 过滤器查找所有 Activity，以此填充应用启动器。</p>
<p>您的应用可以采用类似的方式使用 Intent 匹配。<a href="https://developer.android.google.cn/reference/android/content/pm/PackageManager.html" target="_blank" rel="external">PackageManager</a> 提供了一整套 <code>query...() 方法来返回所有能够接受特定 Intent 的组件。此外，它还提供了一系列类似的</code>resolve…() 方法来确定响应 Intent 的最佳组件。 例如，<a href="https://developer.android.google.cn/reference/android/content/pm/PackageManager.html#queryIntentActivities(android.content.Intent, int" target="_blank" rel="external">queryIntentActivities()</a>) 将返回能够执行那些作为参数传递的 Intent 的所有 Activity 列表，而 <a href="https://developer.android.google.cn/reference/android/content/pm/PackageManager.html#queryIntentServices(android.content.Intent, int" target="_blank" rel="external">queryIntentServices()</a>) 则可返回类似的服务列表。这两种方法均不会激活组件，而只是列出能够响应的组件。 对于广播接收器，有一种类似的方法： <a href="https://developer.android.google.cn/reference/android/content/pm/PackageManager.html#queryBroadcastReceivers(android.content.Intent, int" target="_blank" rel="external">queryBroadcastReceivers()</a>)。</p>

      
    </div>
    
    
    

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>如果您觉得这篇文章不错，可以打赏支持下哦，谢谢</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>打赏</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wechatpay.jpg" alt="Jadyli 微信支付"/>
        <p>微信支付</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/images/alipay.jpg" alt="Jadyli 支付宝"/>
        <p>支付宝</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/blog/guide/practices/verifying-apps-art/" rel="next" title="蜗牛计划day04：在Android Runtime(ART)上验证应用行为">
                <i class="fa fa-chevron-left"></i> 蜗牛计划day04：在Android Runtime(ART)上验证应用行为
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Jadyli</p>
              <p class="site-description motion-element" itemprop="description">三七的博客</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">51</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            

          </nav>

          

          <div class="links-of-author motion-element">
            
              
                <span class="links-of-author-item">
                  <a href="https://github.com/Jadyli" target="_blank" title="GitHub">
                    
                      <i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
            
          </div>

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Intent-类型"><span class="nav-number">1.</span> <span class="nav-text">Intent 类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#构建-Intent"><span class="nav-number">2.</span> <span class="nav-text">构建 Intent</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#显式-Intent-示例"><span class="nav-number">2.1.</span> <span class="nav-text">显式 Intent 示例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#隐式-Intent-示例"><span class="nav-number">2.2.</span> <span class="nav-text">隐式 Intent 示例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#强制使用应用选择器"><span class="nav-number">2.3.</span> <span class="nav-text">强制使用应用选择器</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#接收隐式-Intent"><span class="nav-number">3.</span> <span class="nav-text">接收隐式 Intent</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#过滤器示例"><span class="nav-number">3.1.</span> <span class="nav-text">过滤器示例</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#使用待定-Intent"><span class="nav-number">4.</span> <span class="nav-text">使用待定 Intent</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Intent-解析"><span class="nav-number">5.</span> <span class="nav-text">Intent 解析</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#操作测试"><span class="nav-number">5.1.</span> <span class="nav-text">操作测试</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#类别测试"><span class="nav-number">5.2.</span> <span class="nav-text">类别测试</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数据测试"><span class="nav-number">5.3.</span> <span class="nav-text">数据测试</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Intent-匹配"><span class="nav-number">5.4.</span> <span class="nav-text">Intent 匹配</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1264747959'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s19.cnzz.com/z_stat.php%3Fid%3D1264747959%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));</script>

<div class="copyright">&copy; <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jadyli</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.3</div>






        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.3"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.3"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  












  





  

  

  
  

  

  

  

</body>
</html>
